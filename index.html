<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pars Trade | مرکز تخصصی ترید</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100;300;400;700;900&display=swap" rel="stylesheet">
    
    <!-- SciChart Library (Load from CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/scichart@3.2.303/_wasm/scichart.browser.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Vazirmatn', 'sans-serif'],
                    },
                    colors: {
                        tradeGreen: '#00ff88',
                        tradeDark: '#000000',
                        tradeGray: '#111111',
                        tradeGold: '#d4af37',
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #000000;
            color: #ffffff;
            overflow-x: hidden;
        }

        /* Minimalist Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #000; 
        }
        ::-webkit-scrollbar-thumb {
            background: #333; 
            border-radius: 0;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555; 
        }

        /* Subtle Grid */
        .bg-grid {
            background-size: 40px 40px;
            background-image: linear-gradient(to right, rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                              linear-gradient(to bottom, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            mask-image: linear-gradient(to bottom, black 60%, transparent 100%);
        }

        /* Utility Classes */
        .glass-card {
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .nav-item.active {
            color: #00ff88;
            position: relative;
        }
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #00ff88;
            box-shadow: 0 0 10px #00ff88;
        }

        /* Section Control */
        .section-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        .section-content.active-section {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="font-sans antialiased selection:bg-white selection:text-black">

    <!-- Background Grid Only (No Colors) -->
    <div class="fixed inset-0 bg-grid pointer-events-none z-0"></div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 top-0 left-0 border-b border-white/10 bg-black/90 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                
                <!-- Logo -->
                <div class="flex items-center gap-3 cursor-pointer" onclick="switchTab('home')">
                    <i class="fa-solid fa-layer-group text-white text-2xl"></i>
                    <div class="flex flex-col">
                        <span class="text-xl font-black tracking-tighter leading-none">PARS</span>
                        <span class="text-xs font-light tracking-[0.3em] text-gray-400">TRADE</span>
                    </div>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:block">
                    <div class="flex items-center space-x-6 space-x-reverse">
                        <button onclick="switchTab('home')" id="nav-home" class="nav-item active text-gray-300 hover:text-white text-sm font-bold transition-colors px-2">خانه</button>
                        <button onclick="switchTab('chart')" id="nav-chart" class="nav-item text-gray-300 hover:text-white text-sm font-bold transition-colors px-2">چارت</button>
                        <button onclick="switchTab('live')" id="nav-live" class="nav-item text-gray-300 hover:text-white text-sm font-bold transition-colors px-2">لایو</button>
                        <button onclick="switchTab('education')" id="nav-education" class="nav-item text-gray-300 hover:text-white text-sm font-bold transition-colors px-2">آموزش</button>
                        <button onclick="switchTab('chat')" id="nav-chat" class="nav-item text-gray-300 hover:text-white text-sm font-bold transition-colors px-2">گپ / چت</button>
                    </div>
                </div>

                <!-- Login Button -->
                <div class="hidden md:block">
                    <button onclick="switchTab('login')" class="border border-white/20 hover:bg-white hover:text-black text-white px-6 py-2 rounded-full text-sm font-bold transition-all duration-300">
                        لاگ‌این
                    </button>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button class="text-white hover:text-gray-300">
                        <i class="fa-solid fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <main class="relative z-10 pt-24 min-h-screen flex flex-col">
        
        <!-- HOME SECTION -->
        <div id="home-section" class="section-content active-section flex-grow">
            <section class="flex flex-col justify-center items-center text-center px-4 py-20">
                
                <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-none border border-white/20 mb-8 bg-white/5">
                    <span class="w-1.5 h-1.5 bg-white animate-pulse"></span>
                    <span class="text-xs font-mono text-gray-300 tracking-widest uppercase">MARKET IS OPEN</span>
                </div>

                <h1 class="text-5xl md:text-8xl font-black mb-8 leading-none tracking-tight">
                    <span class="block text-gray-600 text-2xl md:text-4xl font-light mb-4">فصل جدیدی از</span>
                    <span id="mystery-text" class="text-white">_____</span>
                </h1>

                <p class="mt-2 max-w-2xl text-lg text-gray-400 leading-relaxed">
                    قدرت گرفته توسط تکنولوژی. تحلیل‌های دقیق. کامیونیتی <span class="text-white font-bold">پارس ترید</span>.
                </p>

                <div class="mt-12 flex flex-col sm:flex-row gap-4 w-full sm:w-auto">
                    <button onclick="switchTab('chart')" class="group px-8 py-4 bg-white text-black font-bold text-lg hover:bg-gray-200 transition-all flex items-center justify-center gap-2">
                        مشاهده چارت
                        <i class="fa-solid fa-arrow-left transition-transform group-hover:-translate-x-1"></i>
                    </button>
                    <a href="https://t.me/TradeCenterPro" target="_blank" class="px-8 py-4 border border-white/20 text-white font-bold text-lg hover:bg-white/10 transition-all">
                        عضویت در کانال
                    </a>
                </div>

                <!-- Stats -->
                <div class="mt-24 grid grid-cols-2 gap-12 md:gap-24 border-t border-white/10 pt-12">
                    <div class="text-center">
                        <div class="text-5xl font-black text-white mb-2 tracking-tighter flex items-center justify-center">
                            <span id="counter-members">0</span>k
                        </div>
                        <div class="text-xs text-gray-500 uppercase tracking-widest">تریدر فعال</div>
                    </div>
                    <div class="text-center">
                        <div class="text-5xl font-black text-white mb-2 tracking-tighter">
                            24<span class="text-gray-600">/</span>7
                        </div>
                        <div class="text-xs text-gray-500 uppercase tracking-widest">پشتیبانی بازار</div>
                    </div>
                </div>
            </section>

            <!-- Message Section -->
            <section class="py-20 bg-neutral-900/30 border-t border-white/5">
                <div class="max-w-4xl mx-auto px-4 text-center">
                    <h2 class="text-3xl font-bold mb-8">ارتباط مستقیم با مدیریت</h2>
                    <div class="glass-card p-8 max-w-xl mx-auto">
                        <form onsubmit="handleSubmit(event)" class="space-y-4 text-right">
                            <input type="text" placeholder="نام مستعار" class="w-full bg-black border border-white/10 p-3 text-white focus:border-white outline-none transition-colors">
                            <textarea rows="3" placeholder="پیشنهاد یا انتقاد شما..." class="w-full bg-black border border-white/10 p-3 text-white focus:border-white outline-none transition-colors"></textarea>
                            <button class="w-full bg-white/10 hover:bg-white hover:text-black text-white py-3 font-bold transition-all">
                                ارسال پیام
                            </button>
                        </form>
                    </div>
                </div>
            </section>
        </div>

        <!-- CHART SECTION (SciChart) -->
        <div id="chart-section" class="section-content w-full h-[calc(100vh-6rem)] px-4 pb-4">
            <div class="w-full h-full border border-white/10 bg-[#0c0c0c] relative">
                <!-- Chart Header -->
                <div class="absolute top-0 left-0 w-full z-20 flex justify-between items-center p-4 border-b border-white/5 bg-black/50 backdrop-blur-sm">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-yellow-500/20 rounded flex items-center justify-center text-yellow-500">
                            <i class="fa-solid fa-coins"></i>
                        </div>
                        <div>
                            <div class="text-white font-bold text-sm">GOLD (XAU/USD)</div>
                            <div class="text-xs text-gray-400 flex items-center gap-1">
                                <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                Market Open
                            </div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <span class="px-3 py-1 bg-white/5 text-xs text-gray-400 border border-white/5">1H</span>
                        <span class="px-3 py-1 bg-white/5 text-xs text-gray-400 border border-white/5">Candles</span>
                    </div>
                </div>
                
                <!-- Chart Container -->
                <div id="scichart-root" class="w-full h-full pt-16"></div>
            </div>
        </div>

        <!-- LIVE SECTION (Placeholder) -->
        <div id="live-section" class="section-content flex-grow">
            <div class="flex flex-col items-center justify-center min-h-[60vh] text-gray-500">
                <i class="fa-solid fa-satellite-dish text-6xl mb-4 opacity-50"></i>
                <h2 class="text-2xl font-bold text-white mb-2">پخش زنده</h2>
                <p>هیچ لایو استریمی در حال حاضر فعال نیست.</p>
            </div>
        </div>

        <!-- EDUCATION SECTION (Placeholder) -->
        <div id="education-section" class="section-content flex-grow">
            <div class="flex flex-col items-center justify-center min-h-[60vh] text-gray-500">
                <i class="fa-solid fa-graduation-cap text-6xl mb-4 opacity-50"></i>
                <h2 class="text-2xl font-bold text-white mb-2">آکادمی پارس ترید</h2>
                <p>دوره های آموزشی به زودی بارگذاری می‌شوند.</p>
            </div>
        </div>

        <!-- CHAT SECTION (Placeholder) -->
        <div id="chat-section" class="section-content flex-grow">
            <div class="flex flex-col items-center justify-center min-h-[60vh] text-gray-500">
                <i class="fa-regular fa-comments text-6xl mb-4 opacity-50"></i>
                <h2 class="text-2xl font-bold text-white mb-2">گپ کامیونیتی</h2>
                <p>برای دسترسی به چت باید وارد شوید.</p>
            </div>
        </div>

        <!-- LOGIN SECTION (Placeholder) -->
        <div id="login-section" class="section-content flex-grow">
            <div class="flex flex-col items-center justify-center min-h-[60vh]">
                <div class="glass-card p-8 w-full max-w-md">
                    <h2 class="text-2xl font-bold text-white mb-6 text-center">ورود به حساب کاربری</h2>
                    <div class="space-y-4">
                        <input type="text" placeholder="نام کاربری" class="w-full bg-black border border-white/10 p-3 text-white text-right focus:border-tradeGreen outline-none">
                        <input type="password" placeholder="رمز عبور" class="w-full bg-black border border-white/10 p-3 text-white text-right focus:border-tradeGreen outline-none">
                        <button class="w-full bg-white text-black font-bold py-3 hover:bg-gray-200 transition-colors">ورود</button>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="border-t border-white/5 bg-black py-8 text-center">
        <p class="text-gray-600 text-xs">
            POWERED BY <a href="https://t.me/Behrise" class="text-white font-bold hover:underline">@BEHRISE</a>
        </p>
    </footer>

    <!-- LOGIC -->
    <script>
        // --- 1. Navigation Logic ---
        function switchTab(tabName) {
            // Reset all nav items
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active', 'text-white'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.add('text-gray-300'));
            
            // Highlight active nav if exists
            const navBtn = document.getElementById(`nav-${tabName}`);
            if(navBtn) {
                navBtn.classList.add('active', 'text-white');
                navBtn.classList.remove('text-gray-300');
            }

            // Hide all sections
            document.querySelectorAll('.section-content').forEach(el => el.classList.remove('active-section'));
            
            // Show target section
            const target = document.getElementById(`${tabName}-section`);
            if(target) target.classList.add('active-section');

            // Initialize Chart only if chart tab is selected and not already initialized
            if(tabName === 'chart' && !window.chartInitialized) {
                initSciChart();
                window.chartInitialized = true;
            }
        }

        // --- 2. SciChart Implementation (Converted from TS to JS) ---
        
        // Generate Realistic Gold Data (Mock)
        function generateGoldData(count) {
            const xValues = [];
            const openValues = [];
            const highValues = [];
            const lowValues = [];
            const closeValues = [];
            const volumeValues = [];

            let currentPrice = 2650.00; // Realistic Gold Price
            let currentTime = new Date().getTime() - (count * 3600 * 1000); // Start 'count' hours ago

            for (let i = 0; i < count; i++) {
                const open = currentPrice;
                // Random volatility
                const volatility = (Math.random() - 0.5) * 10; 
                const close = open + volatility;
                
                const high = Math.max(open, close) + Math.random() * 3;
                const low = Math.min(open, close) - Math.random() * 3;
                
                const volume = Math.floor(Math.random() * 1000) + 500;

                xValues.push(currentTime / 1000); // SciChart uses seconds for Unix
                openValues.push(open);
                highValues.push(high);
                lowValues.push(low);
                closeValues.push(close);
                volumeValues.push(volume);

                currentPrice = close;
                currentTime += 3600 * 1000; // Add 1 hour
            }

            return { xValues, openValues, highValues, lowValues, closeValues, volumeValues };
        }

        async function initSciChart() {
            // Configure to use WASM from CDN
            SciChart.SciChartSurface.useWasmFromCDN();

            // Imports from global SciChart namespace
            const {
                SciChartSurface,
                NumericAxis,
                DateTimeNumericAxis,
                FastCandlestickRenderableSeries,
                OhlcDataSeries,
                XyDataSeries,
                FastColumnRenderableSeries,
                FastLineRenderableSeries,
                XyMovingAverageFilter,
                ZoomPanModifier,
                ZoomExtentsModifier,
                MouseWheelZoomModifier,
                CursorModifier,
                EAutoRange,
                NumberRange,
                ENumericFormat,
                EFillPaletteMode,
                parseColorToUIntArgb
            } = SciChart;

            // Create Surface
            const { sciChartSurface, wasmContext } = await SciChartSurface.create("scichart-root", {
                theme: { type: "Dark" } // Use built-in Dark theme
            });

            // X Axis (Time)
            const xAxis = new DateTimeNumericAxis(wasmContext, {
                autoRange: EAutoRange.Never,
                axisTitle: "Time",
                drawMajorGridLines: false
            });
            sciChartSurface.xAxes.add(xAxis);

            // Y Axis (Price)
            const yAxis = new NumericAxis(wasmContext, {
                labelPrefix: "$",
                labelPrecision: 2,
                autoRange: EAutoRange.Always,
                growBy: new NumberRange(0.1, 0.1),
                drawMajorGridLines: true,
                majorGridLineStyle: { color: "#333333", strokeThickness: 1, strokeDashArray: [2, 2] }
            });
            sciChartSurface.yAxes.add(yAxis);

            // Hidden Y Axis for Volume
            const yAxisVolume = new NumericAxis(wasmContext, {
                id: "Y_AXIS_VOLUME",
                isVisible: false,
                growBy: new NumberRange(0, 4),
                autoRange: EAutoRange.Always
            });
            sciChartSurface.yAxes.add(yAxisVolume);

            // Get Data
            const data = generateGoldData(300);
            
            // Setup Data Series
            const candleDataSeries = new OhlcDataSeries(wasmContext, {
                xValues: data.xValues,
                openValues: data.openValues,
                highValues: data.highValues,
                lowValues: data.lowValues,
                closeValues: data.closeValues,
                dataSeriesName: "Gold (XAU/USD)"
            });

            // Render Candlesticks
            const candlestickSeries = new FastCandlestickRenderableSeries(wasmContext, {
                dataSeries: candleDataSeries,
                strokeThickness: 1,
                brushUp: "#00ff8877",       // Green with opacity
                brushDown: "#ff333377",     // Red with opacity
                strokeUp: "#00ff88",
                strokeDown: "#ff3333",
            });
            sciChartSurface.renderableSeries.add(candlestickSeries);

            // Moving Averages (EMA 20 & 50)
            sciChartSurface.renderableSeries.add(
                new FastLineRenderableSeries(wasmContext, {
                    dataSeries: new XyMovingAverageFilter(candleDataSeries, { length: 20 }),
                    stroke: "#00aaff",
                    strokeThickness: 2
                })
            );
            
            sciChartSurface.renderableSeries.add(
                new FastLineRenderableSeries(wasmContext, {
                    dataSeries: new XyMovingAverageFilter(candleDataSeries, { length: 50 }),
                    stroke: "#d4af37", // Gold color for MA 50
                    strokeThickness: 2
                })
            );

            // Volume Series with PaletteProvider logic implemented manually for simplicity in vanilla JS
            // We create a custom palette provider object
            const volumePaletteProvider = {
                fillPaletteMode: EFillPaletteMode.SOLID,
                onAttached: () => {},
                onDetached: () => {},
                overrideFillArgb: (x, y, index) => {
                    const open = data.openValues[index];
                    const close = data.closeValues[index];
                    return open >= close ? parseColorToUIntArgb("#ff333377") : parseColorToUIntArgb("#00ff8877");
                },
                overrideStrokeArgb: (x, y, index) => {
                    const open = data.openValues[index];
                    const close = data.closeValues[index];
                    return open >= close ? parseColorToUIntArgb("#ff3333") : parseColorToUIntArgb("#00ff88");
                }
            };

            sciChartSurface.renderableSeries.add(
                new FastColumnRenderableSeries(wasmContext, {
                    dataSeries: new XyDataSeries(wasmContext, { xValues: data.xValues, yValues: data.volumeValues }),
                    yAxisId: "Y_AXIS_VOLUME",
                    paletteProvider: volumePaletteProvider
                })
            );

            // Modifiers (Interactivity)
            sciChartSurface.chartModifiers.add(
                new ZoomPanModifier({ enableZoom: true }),
                new ZoomExtentsModifier(),
                new MouseWheelZoomModifier(),
                new CursorModifier({
                    crosshairStroke: "#ffffff",
                    axisLabelFill: "#333333",
                    axisLabelStroke: "#ffffff"
                })
            );

            // Set Initial Range (Last 50 candles)
            const lastIndex = data.xValues.length - 1;
            const rangeStart = data.xValues[lastIndex - 50];
            const rangeEnd = data.xValues[lastIndex];
            xAxis.visibleRange = new NumberRange(rangeStart, rangeEnd);
        }

        // --- 3. Misc Logic (Text Scramble & Counter) ---
        class TextScramble {
            constructor(el) {
                this.el = el;
                this.chars = '!<>-_\\/[]{}—=+*^?#__________';
                this.update = this.update.bind(this);
            }
            setText(newText) {
                const oldText = this.el.innerText;
                const length = Math.max(oldText.length, newText.length);
                const promise = new Promise((resolve) => this.resolve = resolve);
                this.queue = [];
                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || '';
                    const to = newText[i] || '';
                    const start = Math.floor(Math.random() * 40);
                    const end = start + Math.floor(Math.random() * 40);
                    this.queue.push({ from, to, start, end });
                }
                cancelAnimationFrame(this.frameRequest);
                this.frame = 0;
                this.update();
                return promise;
            }
            update() {
                let output = '';
                let complete = 0;
                for (let i = 0, n = this.queue.length; i < n; i++) {
                    let { from, to, start, end, char } = this.queue[i];
                    if (this.frame >= end) {
                        complete++;
                        output += to;
                    } else if (this.frame >= start) {
                        if (!char || Math.random() < 0.28) {
                            char = this.chars[Math.floor(Math.random() * this.chars.length)];
                            this.queue[i].char = char;
                        }
                        output += `<span class="text-gray-500">${char}</span>`;
                    } else {
                        output += from;
                    }
                }
                this.el.innerHTML = output;
                if (complete === this.queue.length) {
                    this.resolve();
                } else {
                    this.frameRequest = requestAnimationFrame(this.update);
                    this.frame++;
                }
            }
        }

        const phrases = ['کامیونیتی ترید', 'تحلیل تکنیکال', 'اهداف بزرگ', 'پارس ترید'];
        const el = document.getElementById('mystery-text');
        const fx = new TextScramble(el);
        let counter = 0;
        
        const nextPhrase = () => {
            fx.setText(phrases[counter]).then(() => {
                setTimeout(nextPhrase, 3000);
            });
            counter = (counter + 1) % phrases.length;
        };
        setTimeout(nextPhrase, 500);

        // Counter
        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = (progress * (end - start) + start).toFixed(1);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }
        setTimeout(() => {
            animateValue(document.getElementById("counter-members"), 0, 9.5, 2000);
        }, 1000);

        function handleSubmit(e) {
            e.preventDefault();
            alert('پیام شما ارسال شد. با تشکر.');
        }
    </script>
</body>
</html>




